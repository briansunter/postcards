(this.webpackJsonppostcard=this.webpackJsonppostcard||[]).push([[0],{30:function(e,t,a){e.exports=a(46)},35:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),i=(a(35),a(4)),s=a(15),l=a(51),u=a(50),d=a(27);a(44),a(45);var m=function(){var e=new URLSearchParams(window.location.search),t=atob(e.get("card")||""),a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],m=r[1],f=Object(n.useState)({frontImage:"https://i.imgur.com/TOpuoX2.jpg",latitude:42.3528,longitude:-83.1421,message:"",to:"",address:"",sender:"",isDefaultCard:!0}),p=Object(s.a)(f,2),g=p[0],h=p[1];Object(n.useEffect)((function(){try{var e=JSON.parse(t);h(Object(i.a)(Object(i.a)({},e),{},{isDefaultCard:!1}))}catch(a){console.log("could not parse data",a)}}),[t]);var v=g.isDefaultCard;Object(n.useEffect)((function(){v&&navigator.geolocation.getCurrentPosition((function(e){h((function(t){return Object(i.a)(Object(i.a)({},t),{},{longitude:e.coords.longitude,latitude:e.coords.latitude})}))}))}),[v]);var b="true"===localStorage.getItem("pc:seenTutorial"),w=Object(n.useState)(g.isDefaultCard&&!b),E=Object(s.a)(w,2),k=E[0],C=E[1],O=function(e){C(e),localStorage.setItem("pc:seenTutorial",e?"false":"true")},N=[g.latitude,g.longitude],y=[{selector:".App",content:"Welcome to PostcardPop, a way of making digital postcards to send to your friends. This is the tutorial. Click the next arrow to go to the next tutorial step or click 'x' to exit.",action:function(){m(!0)}},{selector:".frontImgInput",content:"This is where you can select a nice cover image for your postcard. Make sure sure your image site supports embedding. I recommend https://imgur.com.",action:function(){m(!0)}},{selector:".front-img",content:"Tap anywhere on the card to flip.",action:function(){m(!0)}},{selector:".left-content",content:"This is the area to write your message.",action:function(){var e;m(!1),(e=1e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){O(!1),O(!0)}))}},{selector:".stamp",content:"Instead of a 'stamp', use a small map of your current location from OpenStreetMaps. You can drag to change the location. You can also update the latitude and longitude boxes below",action:function(){m(!1)}},{selector:".address",content:"Add the person you're sending the postcard to and their city here.",action:function(){m(!1)}},{selector:".shareLink",content:"This is the link to share your postcard. Send it to someone so they can view it.",action:function(){m(!1)}}],j=Object(n.createRef)(),P=Object(n.createRef)(),S=btoa(JSON.stringify(g));return o.a.createElement("div",{className:"App","data-testid":"home"},o.a.createElement("a",{href:"./",className:"title"},"\u2709PostcardPop"),o.a.createElement("meta",{property:"og:title",content:"PostcardPop Card"}),o.a.createElement("meta",{property:"og:image",content:g.frontImage}),o.a.createElement(d.a,{closeWithMask:!1,steps:y,isOpen:k,lastStepNextButton:o.a.createElement("button",{className:"makeOwnButton"},"Done!"),onRequestClose:function(){return O(!1)}}),o.a.createElement("div",{className:"post-card"},o.a.createElement("div",{className:"flip-card"},o.a.createElement("div",{onClick:function(){return m(!c)},className:"flip-card-inner ".concat(c?"flip-card-togggle-on":"flip-card-toggle-off")},o.a.createElement("div",{className:"flip-card-front"},o.a.createElement("img",{className:"front-img",src:g.frontImage,alt:"Avatar"}),g.isDefaultCard&&o.a.createElement("input",{type:"text",className:"frontImgInput",value:g.frontImage,ref:P,onChange:function(e){var t;null===(t=P.current)||void 0===t||t.select(),h(Object(i.a)(Object(i.a)({},g),{},{frontImage:e.target.value}))},onClick:function(e){e.stopPropagation()}})),o.a.createElement("div",{className:"flip-card-back"},o.a.createElement("div",{className:"left-content"},g.isDefaultCard?o.a.createElement("textarea",{className:"writing",placeholder:"This is the Internet version of sending a postcard home. Use this to send and receive unique flippable postcards. Click on any of these text fields or the map to edit them. Click on the card to flip it.",value:g.message,onChange:function(e){h(Object(i.a)(Object(i.a)({},g),{},{message:e.target.value}))},onClick:function(e){e.stopPropagation()}}):o.a.createElement("p",{className:"writing"},g.message)),o.a.createElement("div",{className:"middleLine"}),o.a.createElement("div",{className:"right-content"},o.a.createElement("div",{className:"stamp-container",onClick:function(e){e.preventDefault(),e.stopPropagation()}},o.a.createElement(l.a,{className:"stamp",id:"mapId",center:N,zoom:9,attributionControl:!1,onMoveEnd:function(e){var t=e.target.getCenter(),a=t.lat,n=t.lng;h(Object(i.a)(Object(i.a)({},g),{},{latitude:a,longitude:n}))},zoomControl:!1},o.a.createElement(u.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:""}))),o.a.createElement("div",{className:"addressBox"},g.isDefaultCard?o.a.createElement("input",{type:"text",className:"address",placeholder:"Recipient name",value:g.to,onChange:function(e){h(Object(i.a)(Object(i.a)({},g),{},{to:e.target.value}))},onClick:function(e){e.stopPropagation()}}):o.a.createElement("p",{className:"address"},g.to),g.isDefaultCard?o.a.createElement("input",{type:"text",className:"address",placeholder:"Recipient city",value:g.address,onChange:function(e){h(Object(i.a)(Object(i.a)({},g),{},{address:e.target.value}))},onClick:function(e){e.stopPropagation()}}):o.a.createElement("p",{className:"address"},g.address),g.isDefaultCard?o.a.createElement("input",{type:"text",className:"address",placeholder:"Your name",value:g.sender,onChange:function(e){h(Object(i.a)(Object(i.a)({},g),{},{sender:e.target.value}))},onClick:function(e){e.stopPropagation()}}):o.a.createElement("p",{className:"address"},g.sender))))))),g.isDefaultCard&&o.a.createElement("label",{className:"shareLinkLabel"},"Share Link:",o.a.createElement("textarea",{className:"shareLink",ref:j,value:"".concat(window.location.href,"?card=").concat(S),onClick:function(e){var t;e.stopPropagation(),null===(t=j.current)||void 0===t||t.select()}})),g.isDefaultCard?o.a.createElement("a",{className:"makeOwnButton",href:"./",onClick:function(){return O(!0)}},"Show Tutorial"):o.a.createElement("a",{className:"makeOwnButton",href:"./"},"Make your own"))},f=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function p(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");f?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):p(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):p(t,e)}))}}()}},[[30,1,2]]]);
//# sourceMappingURL=main.63ac3fe9.chunk.js.map